var LiveView=(()=>{var u=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var w=(r,e,t)=>e in r?u(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,h=(r,e)=>{for(var t in e||(e={}))g.call(e,t)&&w(r,t,e[t]);if(y)for(var t of y(e))U.call(e,t)&&w(r,t,e[t]);return r};var A=(r,e)=>{for(var t in e)u(r,t,{get:e[t],enumerable:!0})},$=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of b(e))!g.call(r,l)&&l!==t&&u(r,l,{get:()=>e[l],enumerable:!(n=m(e,l))||n.enumerable});return r};var v=r=>$(u({},"__esModule",{value:!0}),r);var L={};A(L,{enhanceLiveSocket:()=>R});function S(r){return encodeURIComponent(r).replace(/%5B/g,"[").replace(/%5D/g,"]")}function E(r,e){let t=r,n={};Object.entries(e).forEach(([i,o])=>{let c=new RegExp(`:${i}(?=/|$)`,"g");c.test(t)?t=t.replace(c,encodeURIComponent(String(o))):n[i]=o});let l=[];function a(i,o){i!=null&&(typeof i=="object"&&!Array.isArray(i)?Object.entries(i).forEach(([c,s])=>a(s,`${o}[${c}]`)):Array.isArray(i)?i.forEach((c,s)=>a(c,`${o}[${s}]`)):l.push(`${S(o)}=${encodeURIComponent(String(i))}`))}return Object.entries(n).forEach(([i,o])=>a(o,i)),l.length?`${t}?${l.join("&")}`:t}function O(){let r=document.getElementById("lv-page-params");if(!r)throw new Error('Element with id "lv-page-params" not found.');let e=r.getAttribute("lv-route");if(!e)throw new Error('Attribute "lv-route" not found.');let t={},n={};Array.from(r.attributes).forEach(({name:o,value:c})=>{if(o.startsWith("lv-url-")){let s=o.slice(7);t[s]=JSON.parse(c)}else if(o.startsWith("lv-data-")){let s=o.slice(8);n[s]=JSON.parse(c)}}),document.querySelectorAll("[data-phx-component]").forEach(o=>{let c=o.id;if(!c)return;let s=`_${c}`;Array.from(o.attributes).forEach(({name:f,value:p})=>{if(f.startsWith("lv-url-")){let d=f.slice(7);t[s]=t[s]||{},t[s][d]=JSON.parse(p)}else if(f.startsWith("lv-data-")){let d=f.slice(8);n[s]=n[s]||{},n[s][d]=JSON.parse(p)}})});let l=E(e,t),a={};Object.keys(t).forEach(o=>a[o]=t[o]),Object.entries(n).forEach(([o,c])=>{a[o]&&typeof a[o]=="object"&&typeof c=="object"?a[o]=h(h({},a[o]),c):a[o]=c});let i=E(e,a);return{primaryUrl:l,combinedUrl:i}}function R(r){return r.domCallbacks.onPatchEnd=function(e){try{let t=O(),n=new URL(t.primaryUrl,window.location.origin),l=new URL(t.combinedUrl,window.location.origin);r.historyPatch(n.href,"push"),window.liveSocket.href=n.href,window.liveSocket.main&&window.liveSocket.main.setHref(l.href)}catch(t){console.error("Error updating URL:",t)}},r.pushPatchUrl=(e,t={})=>{r.historyPatch(e,t)},window.addEventListener("phx:js-execute",e=>{let t=e.detail.to||"body";document.querySelectorAll(t).forEach(n=>{window.liveSocket.execJS(n,e.detail.ops)})}),r}return v(L);})();
